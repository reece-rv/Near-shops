<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nearby Furniture & Charity Shops</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; margin: 0; }
  #map { height: 90vh; width: 100%; }
  button { padding: 10px 20px; font-size: 16px; margin: 10px; cursor: pointer; }
</style>
</head>
<body>
<h2>Nearby Furniture & Charity Shops</h2>
<button onclick="findShops()">Search Nearby</button>
<div id="map"></div>
<script>
let map, service, infowindow;

function initMap(lat, lng) {
  const location = new google.maps.LatLng(lat, lng);
  map = new google.maps.Map(document.getElementById("map"), {
    center: location,
    zoom: 14
  });

  const request = {
    location: location,
    radius: '5000',
    keyword: 'furniture shop OR charity shop'
  };

  service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, (results, status) => {
    if (status === google.maps.places.PlacesServiceStatus.OK) {
      for (let i = 0; i < results.length; i++) {
        createMarker(results[i]);
      }
    }
  });
}

function createMarker(place) {
  if (!place.geometry || !place.geometry.location) return;
  const marker = new google.maps.Marker({
    map,
    position: place.geometry.location
  });

  google.maps.event.addListener(marker, "click", () => {
    infowindow = new google.maps.InfoWindow({
      content: `<strong>${place.name}</strong><br>${place.vicinity}`
    });
    infowindow.open(map, marker);
  });
}

function findShops() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      pos => {
        initMap(pos.coords.latitude, pos.coords.longitude);
      },
      () => {
        alert("Unable to get your location");
      }
    );
  } else {
    alert("Geolocation not supported");
  }
}
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
</body>
</html>
